<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aesthetic Stopwatch (Green)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&display=swap');
        body {
            font-family: 'Orbitron', sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #171717 100%);
            color: #d8b4fe;
        }
        .timer-display {
            font-variant-numeric: tabular-nums;
            text-shadow: 0 0 15px #a3e635, 0 0 20px #a3e635;
        }
        .container-glow {
            background-color: rgba(32, 30, 48, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(163, 230, 53, 0.2);
            box-shadow: 0 10px 20px rgba(0,0,0,0.3), 0 0 50px rgba(163, 230, 53, 0.2);
        }
        .button-glow {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }
        .button-glow:hover {
            box-shadow: 0 0 15px rgba(163, 230, 53, 0.6), 0 0 20px rgba(163, 230, 53, 0.4);
            transform: translateY(-2px);
        }
        .button-glow:active {
            transform: translateY(1px);
        }
        .lap-item-animation {
            animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        /* Analog Clock Styles */
        .analog-clock {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background-color: #2e2c45;
            position: relative;
            margin: 0 auto 2rem;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.4), 0 0 10px rgba(0,0,0,0.2);
            border: 2px solid #5a5775;
        }
        .hand {
            position: absolute;
            bottom: 50%;
            left: 50%;
            transform-origin: bottom;
            background-color: currentColor;
            border-radius: 2px;
            transform: translateX(-50%) rotate(0deg);
            transition: transform 0.05s linear;
        }
        .hour-hand {
            width: 4px;
            height: 40px;
            background-color: #f1f5f9;
        }
        .minute-hand {
            width: 3px;
            height: 60px;
            background-color: #cbd5e1;
        }
        .second-hand {
            width: 2px;
            height: 70px;
            background-color: #a3e635; /* Green */
        }
        .center-dot {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 8px;
            height: 8px;
            background-color: #a3e635; /* Green */
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
        }
        .clock-number {
            position: absolute;
            top: 50%;
            left: 50%;
            font-size: 0.8rem;
            font-weight: 600;
            color: #a3e635; /* Green */
            transform: translate(-50%, -50%);
            transform-origin: 0 0;
            user-select: none;
        }
        /* Position numbers individually with CSS transforms */
        .number-12 { transform: translate(-50%, -50%) rotate(0deg) translateY(-65px) rotate(-0deg); }
        .number-1 { transform: translate(-50%, -50%) rotate(30deg) translateY(-65px) rotate(-30deg); }
        .number-2 { transform: translate(-50%, -50%) rotate(60deg) translateY(-65px) rotate(-60deg); }
        .number-3 { transform: translate(-50%, -50%) rotate(90deg) translateY(-65px) rotate(-90deg); }
        .number-4 { transform: translate(-50%, -50%) rotate(120deg) translateY(-65px) rotate(-120deg); }
        .number-5 { transform: translate(-50%, -50%) rotate(150deg) translateY(-65px) rotate(-150deg); }
        .number-6 { transform: translate(-50%, -50%) rotate(180deg) translateY(-65px) rotate(-180deg); }
        .number-7 { transform: translate(-50%, -50%) rotate(210deg) translateY(-65px) rotate(-210deg); }
        .number-8 { transform: translate(-50%, -50%) rotate(240deg) translateY(-65px) rotate(-240deg); }
        .number-9 { transform: translate(-50%, -50%) rotate(270deg) translateY(-65px) rotate(-270deg); }
        .number-10 { transform: translate(-50%, -50%) rotate(300deg) translateY(-65px) rotate(-300deg); }
        .number-11 { transform: translate(-50%, -50%) rotate(330deg) translateY(-65px) rotate(-330deg); }
    </style>
</head>
<body class="text-gray-100 flex items-center justify-center min-h-screen p-4">
    <div class="p-8 rounded-2xl w-full max-w-md text-center container-glow">
        <h1 class="text-4xl md:text-5xl font-extrabold mb-6 text-lime-400">Stopwatch</h1>

        <!-- Analog Clock Display -->
        <div class="analog-clock">
            <div id="hour-hand" class="hand hour-hand"></div>
            <div id="minute-hand" class="hand minute-hand"></div>
            <div id="second-hand" class="hand second-hand"></div>
            <div class="center-dot"></div>
            <div class="clock-number number-12">12</div>
            <div class="clock-number number-1">1</div>
            <div class="clock-number number-2">2</div>
            <div class="clock-number number-3">3</div>
            <div class="clock-number number-4">4</div>
            <div class="clock-number number-5">5</div>
            <div class="clock-number number-6">6</div>
            <div class="clock-number number-7">7</div>
            <div class="clock-number number-8">8</div>
            <div class="clock-number number-9">9</div>
            <div class="clock-number number-10">10</div>
            <div class="clock-number number-11">11</div>
        </div>

        <!-- Main timer display -->
        <div id="display" class="timer-display text-5xl md:text-7xl font-mono tracking-wider mb-8 text-lime-400">
            00:00:00
        </div>

        <!-- Buttons -->
        <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4 mb-8">
            <button id="start-stop-btn"
                class="button-glow bg-lime-500 hover:bg-lime-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-transform transform hover:scale-105 active:scale-95 focus:outline-none focus:ring-2 focus:ring-lime-400 focus:ring-opacity-50">
                Start
            </button>
            <button id="lap-reset-btn"
                class="button-glow bg-slate-800 hover:bg-slate-700 text-gray-100 font-bold py-3 px-8 rounded-full shadow-lg transition-transform transform hover:scale-105 active:scale-95 focus:outline-none focus:ring-2 focus:ring-slate-700 focus:ring-opacity-50 hidden">
                Lap
            </button>
        </div>

        <!-- Lap times list -->
        <div class="w-full">
            <h2 class="text-2xl font-bold mb-4 text-lime-400">Laps</h2>
            <ul id="laps-list" class="bg-black bg-opacity-30 rounded-xl p-2 max-h-64 overflow-y-auto"></ul>
        </div>
    </div>

    <script>
        // DOM element references
        const display = document.getElementById('display');
        const startStopBtn = document.getElementById('start-stop-btn');
        const lapResetBtn = document.getElementById('lap-reset-btn');
        const lapsList = document.getElementById('laps-list');
        const hourHand = document.getElementById('hour-hand');
        const minuteHand = document.getElementById('minute-hand');
        const secondHand = document.getElementById('second-hand');

        // State variables
        let timer = null;
        let startTime = 0;
        let elapsedTime = 0;
        let lastLapTime = 0;
        let isRunning = false;
        let lapCount = 0;

        /**
         * Formats milliseconds into a readable time string.
         * Omits hours and the first colon if the time is less than one hour.
         * @param {number} ms - The time in milliseconds.
         * @returns {string} The formatted time string.
         */
        const formatTime = ms => {
            const totalSeconds = Math.floor(ms / 1000);
            const totalMinutes = Math.floor(totalSeconds / 60);
            const totalHours = Math.floor(totalMinutes / 60);

            const minutes = totalMinutes % 60;
            const seconds = totalSeconds % 60;
            const milliseconds = Math.floor(ms % 1000 / 10);

            const formatPart = num => num.toString().padStart(2, '0');

            if (totalHours > 0) {
                return `${totalHours}:${formatPart(minutes)}:${formatPart(seconds)}:${formatPart(milliseconds)}`;
            } else {
                return `${formatPart(minutes)}:${formatPart(seconds)}:${formatPart(milliseconds)}`;
            }
        };

        /**
         * Updates the timer display every 10 milliseconds.
         * Calculates elapsed time and formats it for display.
         */
        function updateDisplay() {
            const currentTime = Date.now();
            const timeElapsed = currentTime - startTime + elapsedTime;
            display.textContent = formatTime(timeElapsed);
        }

        /**
         * Updates the analog clock hands.
         */
        function updateAnalogClock() {
            const now = new Date();
            const seconds = now.getSeconds();
            const minutes = now.getMinutes();
            const hours = now.getHours();

            const secondDegrees = (seconds / 60) * 360;
            const minuteDegrees = (minutes / 60) * 360 + (seconds / 60) * 6;
            const hourDegrees = (hours / 12) * 360 + (minutes / 60) * 30;

            secondHand.style.transform = `translateX(-50%) rotate(${secondDegrees}deg)`;
            minuteHand.style.transform = `translateX(-50%) rotate(${minuteDegrees}deg)`;
            hourHand.style.transform = `translateX(-50%) rotate(${hourDegrees}deg)`;

            requestAnimationFrame(updateAnalogClock);
        }

        /**
         * Toggles the stopwatch between running and stopped states.
         */
        function startStop() {
            if (isRunning) {
                // Stop the stopwatch
                clearInterval(timer);
                elapsedTime += Date.now() - startTime;
                isRunning = false;
                startStopBtn.textContent = 'Start';
                startStopBtn.classList.remove('bg-rose-500', 'hover:bg-rose-600');
                startStopBtn.classList.add('bg-lime-500', 'hover:bg-lime-600');
                lapResetBtn.textContent = 'Reset';
            } else {
                // Start the stopwatch
                startTime = Date.now();
                timer = setInterval(updateDisplay, 10);
                isRunning = true;
                startStopBtn.textContent = 'Stop';
                startStopBtn.classList.remove('bg-lime-500', 'hover:bg-lime-600');
                startStopBtn.classList.add('bg-rose-500', 'hover:bg-rose-600');
                lapResetBtn.textContent = 'Lap';
                lapResetBtn.classList.remove('hidden');
            }
        }

        /**
         * Resets the stopwatch to its initial state.
         * This function is only called when the stopwatch is not running.
         */
        function reset() {
            clearInterval(timer);
            startTime = 0;
            elapsedTime = 0;
            lastLapTime = 0;
            isRunning = false;
            lapCount = 0;
            display.textContent = '00:00:00';
            startStopBtn.textContent = 'Start';
            startStopBtn.classList.remove('bg-rose-500', 'hover:bg-rose-600');
            startStopBtn.classList.add('bg-lime-500', 'hover:bg-lime-600');
            lapResetBtn.textContent = 'Lap';
            lapResetBtn.classList.add('hidden');
            lapsList.innerHTML = '';
        }

        /**
         * Records and displays a lap time.
         * This function is only called when the stopwatch is running.
         */
        function lap() {
            lapCount++;
            const totalMilliseconds = (Date.now() - startTime + elapsedTime);
            const lapMilliseconds = totalMilliseconds - lastLapTime;
            lastLapTime = totalMilliseconds;

            const totalTimeFormatted = formatTime(totalMilliseconds);
            const lapTimeFormatted = formatTime(lapMilliseconds);

            const li = document.createElement('li');
            li.innerHTML = `<span class="font-bold text-lg text-lime-400">Lap ${lapCount}:</span>
                            <span class="text-right flex-grow pr-2">${lapTimeFormatted}</span>
                            <span class="text-right text-gray-400">(${totalTimeFormatted})</span>`;
            li.classList.add('p-3', 'rounded-lg', 'flex', 'items-center', 'mb-2', 'space-x-4', 'lap-item-animation');

            // Add alternating colors for better readability
            if (lapCount % 2 === 0) {
                li.classList.add('bg-slate-700');
            } else {
                li.classList.add('bg-slate-800');
            }
            lapsList.prepend(li); // Add new lap to the top of the list
        }

        // Event listeners for button clicks
        startStopBtn.addEventListener('click', startStop);
        lapResetBtn.addEventListener('click', () => {
            if (isRunning) {
                lap();
            } else {
                reset();
            }
        });

        // Initialize and start the analog clock
        window.onload = function() {
            updateAnalogClock();
        };
    </script>
</body>
</html>
